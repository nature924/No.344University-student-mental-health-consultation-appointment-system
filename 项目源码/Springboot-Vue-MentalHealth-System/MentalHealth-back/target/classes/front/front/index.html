<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <title>大学生心理健康咨询预约管理系统</title>
    <link rel="stylesheet" href="./layui/css/layui.css">
    <link rel="stylesheet" href="./xznstatic/css/common.css"/>
    <link rel="stylesheet" href="./xznstatic/css/style.css"/>
    <link rel="stylesheet" href="css/theme.css"/>

    <style type="text/css">
        html, body {
            height: 100%;
            margin: 0;
            padding: 0;
            font-family: "Microsoft YaHei", sans-serif;
        }

        /* 浅蓝色主题 */
        .navs {
            box-shadow: 0 2px 5px rgba(135,206,235,0.1); /* 浅蓝色阴影 */
        }

        .title {
            color: #fff6d0 !important; /* 深蓝色 */
            font-size: 22px !important;
            font-weight: bold !important;
            text-shadow: 1px 1px 2px rgba(135,206,235,0.2);
        }

        .list ul li a {
            color: #fff6d0 !important; /* 深蓝色 */
            font-size: 16px !important;
            transition: all 0.3s;
        }

        .list ul li.current a {
            color: #ffffff !important;
            border-radius: 4px;
            padding: 8px 15px;
        }

        .list ul li a:hover {
            color: #89cff0 !important;
        }

        #tabbar {
            background-color: #e3f2fd !important;
            border-top: 2px solid #89cff0;
        }

        #iframe {
            background-color: #f0f8ff;
        }

        /* 按钮和交互元素 */
        .layui-btn-primary {
            background-color: #89cff0 !important;
            border-color: #89cff0 !important;
            color: #fff !important;
        }
    </style>
</head>
<body>

<div id="header">
    <div class="navs">
        <div class="title">大学生心理健康咨询预约系统</div>
        <div class="list">
            <ul>
                <li class='current'><a href="javascript:navPage('./pages/home/home.html')" class="menumain" >首页</a></li>
                <li v-for="(item,index) in indexNav" v-bind:key="index"><a :href="'javascript:navPage(\''+item.url+'\')'" class="menumain"  style="cursor: pointer;">{{item.name}}</a></li>
                <li><a href="javascript:centerPage();" class="menumain">个人中心</a></li>
                <li><a :href="adminurl" target="_blank" class="menumain" style="cursor: pointer;">后台管理</a></li>
            </ul>
        </div>
    </div>
</div>

<iframe src="./pages/home/home.html" id="iframe" frameborder="0" scrolling="no" width="100%" onload="changeFrameHeight"></iframe>

<div id="tabbar" class="tabbar main_color" style="padding: 15px 0; margin: 0; position: relative; z-index: 999;">
    <div style="padding: 0 10px; margin: 0 auto; color: #0077b6; text-align: center; width: 100%; line-height: 24px; font-size: 14px;" class="company">
        © 2025 大学生心理健康咨询预约系统 - 专业心理咨询服务
    </div>
</div>

<script src="./xznstatic/js/jquery-1.11.3.min.js"></script>
<script src="./layui/layui.js"></script>
<script src="./js/vue.js"></script>
<script src="xznstatic/js/element.min.js"></script>
<link rel="stylesheet" href="xznstatic/css/element.min.css">
<script src="./js/config.js"></script>

<script>
    var vue1 = new Vue({el: '#tabbar'})

    var vue = new Vue({
        el: '#header',
        data: {
            iconArr: ['layui-icon-gift','layui-icon-email','layui-icon-logout','layui-icon-transfer','layui-icon-slider','layui-icon-print','layui-icon-cols','layui-icon-snowflake','layui-icon-note','layui-icon-flag','layui-icon-theme','layui-icon-website','layui-icon-console','layui-icon-face-surprised','layui-icon-template-1','layui-icon-app','layui-icon-read','layui-icon-component','layui-icon-file-b','layui-icon-unlink','layui-icon-tabs','layui-icon-form','layui-icon-chat'],
            indexNav: indexNav,
            adminurl: adminurl,
            projectName: projectName,
        },
        mounted: function() {
            this.bindClickOnLi();
            // 动态修改layui组件颜色
            layui.use(['element'], function(){
                layui.$('.layui-nav-itemed>a').css('color', '#89cff0');
            });
        },
        created() {
            this.iconArr.sort(()=>{
                return (0.5-Math.random())
            })
        },
        methods: {
            jump(url) {
                jump(url)
            },
            bindClickOnLi() {
                let list = document.getElementsByTagName("li");
                for(var i = 0;i<list.length;i++){
                    list[i].onclick = function(){
                        $(this).addClass("current").siblings().removeClass("current");
                    }
                }
            }
        }
    });

    layui.use(['element','layer'], function() {
        var element = layui.element;
        var layer = layui.layer;
        // 修改layer默认样式
        layer.config({
            skin: 'demo-class',
            success: function(layero){
                layero.find('.layui-layer-title').css({
                    'background':'#89cff0',
                    'color':'#fff',
                    'border':'none'
                });
            }
        });
    });

     layui.use(['element','layer'], function() {
        var element = layui.element;
        var layer = layui.layer;
    });

    function chatTap(){
        var userTable = localStorage.getItem('userTable');
        if (userTable) {
            layui.layer.open({
                type: 2,
                title: '客服',
                area: ['600px', '600px'],
                content: './pages/chat/list.html'
            });
        } else {
            window.location.href = './pages/login/login.html'
        }
    }

    function navPage(url) {
        localStorage.setItem('iframeUrl', url);
        document.getElementById('iframe').src = url;
    }

    function centerPage() {
        var userTable = localStorage.getItem('userTable');
        if (userTable) {
            localStorage.setItem('iframeUrl', './pages/' + userTable + '/center.html');
            document.getElementById('iframe').src = './pages/' + userTable + '/center.html';
        } else {
            window.location.href = './pages/login/login.html'
        }
    }

    var iframeUrl = localStorage.getItem('iframeUrl');
    document.getElementById('iframe').src = iframeUrl  || './pages/home/home.html';

    setInterval(function(){
        changeFrameHeight();
    },200)

    function changeFrameHeight() {
        var iframe = document.getElementById('iframe');
        if (iframe) {
            var iframeWin = iframe.contentWindow || iframe.contentDocument.parentWindow;
            if (iframeWin.document.body) {
                iframe.height = iframeWin.document.body.scrollHeight;
            }
        }
    };

    window.onresize = function() {
        changeFrameHeight();
    }

</script>
</body>
</html>